#jinja2: lstrip_blocks: True
---
version: "3"

services:
  default:
    image: {{ pihole_image }}
    restart: unless-stopped
    network_mode: host
    environment:
      ServerIP: {{ pihole_ip | mandatory }}
      VIRTUAL_HOST: {{ pihole_hostname }}
      TZ: {{ pihole_timezone }}
      WEBPASSWORD: {{ pihole_password }}
      DNS1: {{ pihole_dns1 }}
      DNS2: {{ pihole_dns2 }}
    volumes:
      - default:/etc/pihole
      - dnsmasq:/etc/dnsmasq.d
    dns:
      - 127.0.0.1
      - {{ pihole_dns1 }}
    cap_add:
      - NET_ADMIN

volumes:
  default:
  dnsmasq:
